<?xml version="1.0" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<!-- saved from url=(0017)http://localhost/ -->
<script language="JavaScript" src="../../../displayToc.js"></script>
<script language="JavaScript" src="../../../tocParas.js"></script>
<script language="JavaScript" src="../../../tocTab.js"></script>
<link rel="stylesheet" type="text/css" href="../../../scineplex.css">
<title></title>
<link rel="stylesheet" href="../../../Active.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#CONSTRUCTOR">CONSTRUCTOR</a>
    <ul>
      <li><a href="#new">new</a></li>
    </ul>
  </li>
  <li><a href="#METHODS">METHODS</a>
    <ul>
      <li><a href="#parse_datetime">parse_datetime</a></li>
      <li><a href="#parse_datetime_duration">parse_datetime_duration</a></li>
      <li><a href="#extract_datetime">extract_datetime</a></li>
      <li><a href="#success">success</a></li>
      <li><a href="#error">error</a></li>
      <li><a href="#trace">trace</a></li>
    </ul>
  </li>
  <li><a href="#GRAMMAR">GRAMMAR</a></li>
  <li><a href="#EXAMPLES">EXAMPLES</a></li>
  <li><a href="#BUGS-CAVEATS">BUGS &amp; CAVEATS</a></li>
  <li><a href="#CREDITS">CREDITS</a></li>
  <li><a href="#SEE-ALSO">SEE ALSO</a></li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
  <li><a href="#LICENSE">LICENSE</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>DateTime::Format::Natural - Parse informal natural language date/time strings</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code> <span class="keyword">use</span> <span class="variable">DateTime::Format::Natural</span><span class="operator">;</span>
 
 <span class="variable">$parser</span> <span class="operator">=</span> <span class="variable">DateTime::Format::Natural</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">;</span>
 
 <span class="variable">$dt</span> <span class="operator">=</span> <span class="variable">$parser</span><span class="operator">-&gt;</span><span class="variable">parse_datetime</span><span class="operator">(</span><span class="variable">$date_string</span><span class="operator">);</span>
 <span class="variable">@dt</span> <span class="operator">=</span> <span class="variable">$parser</span><span class="operator">-&gt;</span><span class="variable">parse_datetime_duration</span><span class="operator">(</span><span class="variable">$date_string</span><span class="operator">);</span>
 
 <span class="variable">$date_string</span>  <span class="operator">=</span> <span class="variable">$parser</span><span class="operator">-&gt;</span><span class="variable">extract_datetime</span><span class="operator">(</span><span class="variable">$extract_string</span><span class="operator">);</span>
 <span class="variable">@date_strings</span> <span class="operator">=</span> <span class="variable">$parser</span><span class="operator">-&gt;</span><span class="variable">extract_datetime</span><span class="operator">(</span><span class="variable">$extract_string</span><span class="operator">);</span>
 
 <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$parser</span><span class="operator">-&gt;</span><span class="variable">success</span><span class="operator">)</span> <span class="operator">{</span>
     <span class="comment"># operate on $dt/@dt, for example:</span>
     <span class="keyword">print</span> <span class="variable">$dt</span><span class="operator">-&gt;</span><span class="variable">strftime</span><span class="operator">(</span><span class="string">'%d.%m.%Y %H:%M:%S'</span><span class="operator">),</span> <span class="string">"\n"</span><span class="operator">;</span>
 <span class="operator">}</span> <span class="keyword">else</span> <span class="operator">{</span>
     <span class="keyword">warn</span> <span class="variable">$parser</span><span class="operator">-&gt;</span><span class="variable">error</span><span class="operator">;</span>
 <span class="operator">}</span>
 
 <span class="variable">@traces</span> <span class="operator">=</span> <span class="variable">$parser</span><span class="operator">-&gt;</span><span class="variable">trace</span><span class="operator">;</span>
 
 <span class="comment"># examples</span>
 
 <span class="number">12</span><span class="operator">:</span><span class="number">14</span> <span class="variable">PM</span>
 <span class="keyword">next</span> <span class="variable">tuesday</span> <span class="variable">at</span> <span class="number">2</span><span class="variable">am</span>
 <span class="variable">tomorrow</span> <span class="variable">morning</span>
 <span class="number">4</span><span class="variable">pm</span> <span class="variable">yesterday</span>
 <span class="number">10</span> <span class="variable">weeks</span> <span class="variable">ago</span>
 
 <span class="number">1</span><span class="variable">st</span> <span class="variable">tuesday</span> <span class="keyword">last</span> <span class="variable">november</span>
 <span class="number">2</span><span class="variable">nd</span> <span class="variable">friday</span> <span class="variable">in</span> <span class="variable">august</span>
 <span class="variable">final</span> <span class="variable">thursday</span> <span class="variable">in</span> <span class="variable">april</span>
 
 <span class="keyword">for</span> <span class="number">3</span> <span class="variable">hours</span>
 <span class="variable">monday</span> <span class="variable">to</span> <span class="variable">friday</span>
 <span class="number">1</span> <span class="variable">April</span> <span class="number">10</span> <span class="variable">am</span> <span class="variable">to</span> <span class="number">1</span> <span class="variable">May</span> <span class="number">8</span><span class="variable">am</span>
 
 <span class="variable">jan</span> <span class="number">24</span><span class="operator">,</span> <span class="number">2011</span> <span class="number">12</span><span class="operator">:</span><span class="number">00</span>
</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p><code>DateTime::Format::Natural</code> parses informal natural language date/time strings. In addition, parsable date/time substrings may be extracted from ordinary strings.</p>

<h1 id="CONSTRUCTOR">CONSTRUCTOR</h1>

<h2 id="new">new</h2>

<p>Creates a new <code>DateTime::Format::Natural</code> object. Arguments to <code>new()</code> are options and not necessarily required.</p>

<pre><code> <span class="variable">$parser</span> <span class="operator">=</span> <span class="variable">DateTime::Format::Natural</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span>
           <span class="string">datetime</span>      <span class="operator">=&gt;</span> <span class="variable">DateTime</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(...),</span>
           <span class="string">lang</span>          <span class="operator">=&gt;</span> <span class="string">'en'</span><span class="operator">,</span>
           <span class="string">format</span>        <span class="operator">=&gt;</span> <span class="string">'mm/dd/yy'</span><span class="operator">,</span>
           <span class="string">prefer_future</span> <span class="operator">=&gt;</span> <span class="string">'[0|1]'</span><span class="operator">,</span>
           <span class="string">time_zone</span>     <span class="operator">=&gt;</span> <span class="string">'floating'</span><span class="operator">,</span>
           <span class="string">daytime</span>       <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">morning</span>   <span class="operator">=&gt;</span> <span class="number">06</span><span class="operator">,</span>
                              <span class="string">afternoon</span> <span class="operator">=&gt;</span> <span class="number">13</span><span class="operator">,</span>
                              <span class="string">evening</span>   <span class="operator">=&gt;</span> <span class="number">20</span><span class="operator">,</span>
                            <span class="operator">}</span><span class="operator">,</span>
 <span class="operator">);</span>
</code></pre>

<ul>

<li><p><code>datetime</code></p>

<p>Overrides the present now with a <a href="../../../lib/DateTime.html">DateTime</a> object provided.</p>

</li>
<li><p><code>lang</code></p>

<p>Contains the language selected, currently limited to <code>en</code> (english). Defaults to &#39;<code>en</code>&#39;.</p>

</li>
<li><p><code>format</code></p>

<p>Specifies the format of numeric dates, defaults to &#39;<code>d/m/y</code>&#39;.</p>

</li>
<li><p><code>prefer_future</code></p>

<p>Turns ambiguous weekdays/months to their future relatives. Accepts a boolean, defaults to false.</p>

</li>
<li><p><code>time_zone</code></p>

<p>The time zone to use when parsing and for output. Accepts any time zone recognized by <a href="../../../lib/DateTime.html">DateTime</a>. Defaults to &#39;floating&#39;.</p>

</li>
<li><p><code>daytime</code></p>

<p>An anonymous hash reference consisting of customized daytime hours, which may be selectively changed.</p>

</li>
</ul>

<h1 id="METHODS">METHODS</h1>

<h2 id="parse_datetime">parse_datetime</h2>

<p>Returns a <a href="../../../lib/DateTime.html">DateTime</a> object constructed from a natural language date/time string.</p>

<pre><code> <span class="variable">$dt</span> <span class="operator">=</span> <span class="variable">$parser</span><span class="operator">-&gt;</span><span class="variable">parse_datetime</span><span class="operator">(</span><span class="variable">$date_string</span><span class="operator">);</span>
 <span class="variable">$dt</span> <span class="operator">=</span> <span class="variable">$parser</span><span class="operator">-&gt;</span><span class="variable">parse_datetime</span><span class="operator">(</span><span class="string">string</span> <span class="operator">=&gt;</span> <span class="variable">$date_string</span><span class="operator">);</span>
</code></pre>

<ul>

<li><p><code>string</code></p>

<p>The date string.</p>

</li>
</ul>

<h2 id="parse_datetime_duration">parse_datetime_duration</h2>

<p>Returns one or two <a href="../../../lib/DateTime.html">DateTime</a> objects constructed from a natural language date/time string which may contain timespans/durations. <i>Same</i> interface and options as <code>parse_datetime()</code>, but should be explicitly called in list context.</p>

<pre><code> <span class="variable">@dt</span> <span class="operator">=</span> <span class="variable">$parser</span><span class="operator">-&gt;</span><span class="variable">parse_datetime_duration</span><span class="operator">(</span><span class="variable">$date_string</span><span class="operator">);</span>
 <span class="variable">@dt</span> <span class="operator">=</span> <span class="variable">$parser</span><span class="operator">-&gt;</span><span class="variable">parse_datetime_duration</span><span class="operator">(</span><span class="string">string</span> <span class="operator">=&gt;</span> <span class="variable">$date_string</span><span class="operator">);</span>
</code></pre>

<h2 id="extract_datetime">extract_datetime</h2>

<p>Returns parsable date/time substrings (also known as expressions) extracted from the string provided; in scalar context only the first parsable substring is returned, whereas in list context all parsable substrings are returned. Each extracted substring can then be passed to the <code>parse_datetime()</code>/ <code>parse_datetime_duration()</code> methods.</p>

<pre><code> <span class="variable">$date_string</span>  <span class="operator">=</span> <span class="variable">$parser</span><span class="operator">-&gt;</span><span class="variable">extract_datetime</span><span class="operator">(</span><span class="variable">$extract_string</span><span class="operator">);</span>
 <span class="variable">@date_strings</span> <span class="operator">=</span> <span class="variable">$parser</span><span class="operator">-&gt;</span><span class="variable">extract_datetime</span><span class="operator">(</span><span class="variable">$extract_string</span><span class="operator">);</span>
 <span class="comment"># or</span>
 <span class="variable">$date_string</span>  <span class="operator">=</span> <span class="variable">$parser</span><span class="operator">-&gt;</span><span class="variable">extract_datetime</span><span class="operator">(</span><span class="string">string</span> <span class="operator">=&gt;</span> <span class="variable">$extract_string</span><span class="operator">);</span>
 <span class="variable">@date_strings</span> <span class="operator">=</span> <span class="variable">$parser</span><span class="operator">-&gt;</span><span class="variable">extract_datetime</span><span class="operator">(</span><span class="string">string</span> <span class="operator">=&gt;</span> <span class="variable">$extract_string</span><span class="operator">);</span>
</code></pre>

<h2 id="success">success</h2>

<p>Returns a boolean indicating success or failure for parsing the date/time string given.</p>

<h2 id="error">error</h2>

<p>Returns the error message if the parsing did not succeed.</p>

<h2 id="trace">trace</h2>

<p>Returns one or two strings with the grammar keyword for the valid expression parsed, traces of methods which were called within the Calc class and a summary how often certain units have been modified. More than one string is commonly returned for durations. Useful as a debugging aid.</p>

<h1 id="GRAMMAR">GRAMMAR</h1>

<p>The grammar handling has been rewritten to be easily extendable and hence everybody is encouraged to propose sensible new additions and/or changes.</p>

<p>See the class <a href="../../../lib/DateTime/Format/Natural/Lang/EN.html">DateTime::Format::Natural::Lang::EN</a> if you&#39;re intending to hack a bit on the grammar guts.</p>

<h1 id="EXAMPLES">EXAMPLES</h1>

<p>See the class <a href="../../../lib/DateTime/Format/Natural/Lang/EN.html">DateTime::Format::Natural::Lang::EN</a> for an overview of currently valid input.</p>

<h1 id="BUGS-CAVEATS">BUGS &amp; CAVEATS</h1>

<p><code>parse_datetime()</code>/<code>parse_datetime_duration()</code> always return one or two DateTime objects regardless whether the parse was successful or not. In case no valid expression was found or a failure occurred, an unaltered DateTime object with its initial values (most often the &quot;current&quot; now) is likely to be returned. It is therefore recommended to use <code>success()</code> to assert that the parse did succeed (at least, for common uses), otherwise the absence of a parse failure cannot be guaranteed.</p>

<p><code>parse_datetime()</code> is not capable of handling durations.</p>

<h1 id="CREDITS">CREDITS</h1>

<p>Thanks to Tatsuhiko Miyagawa for the initial inspiration. See Miyagawa&#39;s journal entry <a href="http://use.perl.org/~miyagawa/journal/31378">http://use.perl.org/~miyagawa/journal/31378</a> for more information.</p>

<p>Furthermore, thanks to (in order of appearance) who have contributed valuable suggestions and patches:</p>

<pre><code> Clayton L. Scott
 Dave Rolsky
 CPAN Author &#39;SEKIMURA&#39;
 mike (pulsation)
 Mark Stosberg
 Tuomas Jormola
 Cory Watson
 Urs Stotz
 Shawn M. Moore
 Andreas J. K&ouml;nig
 Chia-liang Kao
 Jonny Schulz
 Jesse Vincent
 Jason May
 Pat Kale
 Ankur Gupta
 Alex Bowley
 Elliot Shank
 Anirvan Chatterjee
 Michael Reddick
 Christian Brink
 Giovanni Pensa
 Andrew Sterling Hanenkamp
 Eric Wilhelm
 Kevin Field
 Wes Morgan
 Vladimir Marek
 Rod Taylor
 Tim Esselens
 Colm Dougan
 Chifung Fan
 Xiao Yafeng
 Roman Filippov
 David Steinbrunner
 Debian Perl Group
 Tim Bunce
 Ricardo Signes</code></pre>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<p><a href="../../../bin/dateparse.html">dateparse</a>, <a href="../../../lib/DateTime.html">DateTime</a>, <a href="../../../lib/Date/Calc.html">Date::Calc</a>, <a href="http://datetime.perl.org">http://datetime.perl.org</a></p>

<h1 id="AUTHOR">AUTHOR</h1>

<p>Steven Schubiger &lt;schubiger@cpan.org&gt;</p>

<h1 id="LICENSE">LICENSE</h1>

<p>This program is free software; you may redistribute it and/or modify it under the same terms as Perl itself.</p>

<p>See <a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></p>


</body>

</html>


