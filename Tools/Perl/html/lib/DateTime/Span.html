<?xml version="1.0" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<!-- saved from url=(0017)http://localhost/ -->
<script language="JavaScript" src="../../displayToc.js"></script>
<script language="JavaScript" src="../../tocParas.js"></script>
<script language="JavaScript" src="../../tocTab.js"></script>
<link rel="stylesheet" type="text/css" href="../../scineplex.css">
<title></title>
<link rel="stylesheet" href="../../Active.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#METHODS">METHODS</a></li>
  <li><a href="#SUPPORT">SUPPORT</a></li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
  <li><a href="#COPYRIGHT">COPYRIGHT</a></li>
  <li><a href="#SEE-ALSO">SEE ALSO</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>DateTime::Span - Datetime spans</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code>    <span class="keyword">use</span> <span class="variable">DateTime</span><span class="operator">;</span>
    <span class="keyword">use</span> <span class="variable">DateTime::Span</span><span class="operator">;</span>
    
    <span class="variable">$date1</span> <span class="operator">=</span> <span class="variable">DateTime</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span> <span class="string">year</span> <span class="operator">=&gt;</span> <span class="number">2002</span><span class="operator">,</span> <span class="string">month</span> <span class="operator">=&gt;</span> <span class="number">3</span><span class="operator">,</span> <span class="string">day</span> <span class="operator">=&gt;</span> <span class="number">11</span> <span class="operator">);</span>
    <span class="variable">$date2</span> <span class="operator">=</span> <span class="variable">DateTime</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span> <span class="string">year</span> <span class="operator">=&gt;</span> <span class="number">2003</span><span class="operator">,</span> <span class="string">month</span> <span class="operator">=&gt;</span> <span class="number">4</span><span class="operator">,</span> <span class="string">day</span> <span class="operator">=&gt;</span> <span class="number">12</span> <span class="operator">);</span>
    <span class="variable">$set2</span> <span class="operator">=</span> <span class="variable">DateTime::Span</span><span class="operator">-&gt;</span><span class="variable">from_datetimes</span><span class="operator">(</span> <span class="string">start</span> <span class="operator">=&gt;</span> <span class="variable">$date1</span><span class="operator">,</span> <span class="string">end</span> <span class="operator">=&gt;</span> <span class="variable">$date2</span> <span class="operator">);</span>
    <span class="comment">#  set2 = 2002-03-11 until 2003-04-12</span>
    
    <span class="variable">$set</span> <span class="operator">=</span> <span class="variable">$set1</span><span class="operator">-&gt;</span><span class="variable">union</span><span class="operator">(</span> <span class="variable">$set2</span> <span class="operator">);</span>         <span class="comment"># like "OR", "insert", "both"</span>
    <span class="variable">$set</span> <span class="operator">=</span> <span class="variable">$set1</span><span class="operator">-&gt;</span><span class="variable">complement</span><span class="operator">(</span> <span class="variable">$set2</span> <span class="operator">);</span>    <span class="comment"># like "delete", "remove"</span>
    <span class="variable">$set</span> <span class="operator">=</span> <span class="variable">$set1</span><span class="operator">-&gt;</span><span class="variable">intersection</span><span class="operator">(</span> <span class="variable">$set2</span> <span class="operator">);</span>  <span class="comment"># like "AND", "while"</span>
    <span class="variable">$set</span> <span class="operator">=</span> <span class="variable">$set1</span><span class="operator">-&gt;</span><span class="variable">complement</span><span class="operator">;</span>             <span class="comment"># like "NOT", "negate", "invert"</span>
    
    <span class="keyword">if</span> <span class="operator">(</span> <span class="variable">$set1</span><span class="operator">-&gt;</span><span class="variable">intersects</span><span class="operator">(</span> <span class="variable">$set2</span> <span class="operator">)</span> <span class="operator">)</span> <span class="operator">{</span> <span class="operator">...</span>  <span class="comment"># like "touches", "interferes"</span>
    <span class="keyword">if</span> <span class="operator">(</span> <span class="variable">$set1</span><span class="operator">-&gt;</span><span class="variable">contains</span><span class="operator">(</span> <span class="variable">$set2</span> <span class="operator">)</span> <span class="operator">)</span> <span class="operator">{</span> <span class="operator">...</span>    <span class="comment"># like "is-fully-inside"</span>
    
    <span class="comment"># data extraction </span>
    <span class="variable">$date</span> <span class="operator">=</span> <span class="variable">$set1</span><span class="operator">-&gt;</span><span class="variable">start</span><span class="operator">;</span>           <span class="comment"># first date of the span</span>
    <span class="variable">$date</span> <span class="operator">=</span> <span class="variable">$set1</span><span class="operator">-&gt;</span><span class="variable">end</span><span class="operator">;</span>             <span class="comment"># last date of the span</span>
</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p><code>DateTime::Span</code> is a module for handling datetime spans, otherwise known as ranges or periods (&quot;from X to Y, inclusive of all datetimes in between&quot;).</p>

<p>This is different from a <code>DateTime::Set</code>, which is made of individual datetime points as opposed to a range. There is also a module <code>DateTime::SpanSet</code> to handle sets of spans.</p>

<h1 id="METHODS">METHODS</h1>

<ul>

<li><p>from_datetimes</p>

<p>Creates a new span based on a starting and ending datetime.</p>

<p>A &#39;closed&#39; span includes its end-dates:</p>

<pre><code>   <span class="variable">$span</span> <span class="operator">=</span> <span class="variable">DateTime::Span</span><span class="operator">-&gt;</span><span class="variable">from_datetimes</span><span class="operator">(</span> <span class="string">start</span> <span class="operator">=&gt;</span> <span class="variable">$dt1</span><span class="operator">,</span> <span class="string">end</span> <span class="operator">=&gt;</span> <span class="variable">$dt2</span> <span class="operator">);</span>
</code></pre>

<p>An &#39;open&#39; span does not include its end-dates:</p>

<pre><code>   <span class="variable">$span</span> <span class="operator">=</span> <span class="variable">DateTime::Span</span><span class="operator">-&gt;</span><span class="variable">from_datetimes</span><span class="operator">(</span> <span class="string">after</span> <span class="operator">=&gt;</span> <span class="variable">$dt1</span><span class="operator">,</span> <span class="string">before</span> <span class="operator">=&gt;</span> <span class="variable">$dt2</span> <span class="operator">);</span>
</code></pre>

<p>A &#39;semi-open&#39; span includes one of its end-dates:</p>

<pre><code>   <span class="variable">$span</span> <span class="operator">=</span> <span class="variable">DateTime::Span</span><span class="operator">-&gt;</span><span class="variable">from_datetimes</span><span class="operator">(</span> <span class="string">start</span> <span class="operator">=&gt;</span> <span class="variable">$dt1</span><span class="operator">,</span> <span class="string">before</span> <span class="operator">=&gt;</span> <span class="variable">$dt2</span> <span class="operator">);</span>
   <span class="variable">$span</span> <span class="operator">=</span> <span class="variable">DateTime::Span</span><span class="operator">-&gt;</span><span class="variable">from_datetimes</span><span class="operator">(</span> <span class="string">after</span> <span class="operator">=&gt;</span> <span class="variable">$dt1</span><span class="operator">,</span> <span class="string">end</span> <span class="operator">=&gt;</span> <span class="variable">$dt2</span> <span class="operator">);</span>
</code></pre>

<p>A span might have just a starting date, or just an ending date. These spans end, or start, in an imaginary &#39;forever&#39; date:</p>

<pre><code>   <span class="variable">$span</span> <span class="operator">=</span> <span class="variable">DateTime::Span</span><span class="operator">-&gt;</span><span class="variable">from_datetimes</span><span class="operator">(</span> <span class="string">start</span> <span class="operator">=&gt;</span> <span class="variable">$dt1</span> <span class="operator">);</span>
   <span class="variable">$span</span> <span class="operator">=</span> <span class="variable">DateTime::Span</span><span class="operator">-&gt;</span><span class="variable">from_datetimes</span><span class="operator">(</span> <span class="string">end</span> <span class="operator">=&gt;</span> <span class="variable">$dt2</span> <span class="operator">);</span>
   <span class="variable">$span</span> <span class="operator">=</span> <span class="variable">DateTime::Span</span><span class="operator">-&gt;</span><span class="variable">from_datetimes</span><span class="operator">(</span> <span class="string">after</span> <span class="operator">=&gt;</span> <span class="variable">$dt1</span> <span class="operator">);</span>
   <span class="variable">$span</span> <span class="operator">=</span> <span class="variable">DateTime::Span</span><span class="operator">-&gt;</span><span class="variable">from_datetimes</span><span class="operator">(</span> <span class="string">before</span> <span class="operator">=&gt;</span> <span class="variable">$dt2</span> <span class="operator">);</span>
</code></pre>

<p>You cannot give both a &quot;start&quot; and &quot;after&quot; argument, nor can you give both an &quot;end&quot; and &quot;before&quot; argument. Either of these conditions will cause the <code>from_datetimes()</code> method to die.</p>

<p>To summarize, a datetime passed as either &quot;start&quot; or &quot;end&quot; is included in the span. A datetime passed as either &quot;after&quot; or &quot;before&quot; is excluded from the span.</p>

</li>
<li><p>from_datetime_and_duration</p>

<p>Creates a new span.</p>

<pre><code>   <span class="variable">$span</span> <span class="operator">=</span> <span class="variable">DateTime::Span</span><span class="operator">-&gt;</span><span class="variable">from_datetime_and_duration</span><span class="operator">(</span> 
       <span class="string">start</span> <span class="operator">=&gt;</span> <span class="variable">$dt1</span><span class="operator">,</span> <span class="string">duration</span> <span class="operator">=&gt;</span> <span class="variable">$dt_dur1</span> <span class="operator">);</span>
   <span class="variable">$span</span> <span class="operator">=</span> <span class="variable">DateTime::Span</span><span class="operator">-&gt;</span><span class="variable">from_datetime_and_duration</span><span class="operator">(</span> 
       <span class="string">after</span> <span class="operator">=&gt;</span> <span class="variable">$dt1</span><span class="operator">,</span> <span class="string">hours</span> <span class="operator">=&gt;</span> <span class="number">12</span> <span class="operator">);</span>
</code></pre>

<p>The new &quot;end of the set&quot; is <i>open</i> by default.</p>

</li>
<li><p>clone</p>

<p>This object method returns a replica of the given object.</p>

</li>
<li><p>set_time_zone( $tz )</p>

<p>This method accepts either a time zone object or a string that can be passed as the &quot;name&quot; parameter to <code>DateTime::TimeZone-&gt;new()</code>. If the new time zone&#39;s offset is different from the old time zone, then the <i>local</i> time is adjusted accordingly.</p>

<p>If the old time zone was a floating time zone, then no adjustments to the local time are made, except to account for leap seconds. If the new time zone is floating, then the <i>UTC</i> time is adjusted in order to leave the local time untouched.</p>

</li>
<li><p>duration</p>

<p>The total size of the set, as a <code>DateTime::Duration</code> object, or as a scalar containing infinity.</p>

<p>Also available as <code>size()</code>.</p>

</li>
<li><p>start, min</p>

</li>
<li><p>end, max</p>

<p>First or last dates in the span.</p>

<p>It is possible that the return value from these methods may be a <code>DateTime::Infinite::Future</code> or a <code>DateTime::Infinite::Past</code>xs object.</p>

<p>If the set ends <code>before</code> a date <code>$dt</code>, it returns <code>$dt</code>. Note that in this case <code>$dt</code> is not a set element - but it is a set boundary.</p>

<p>These methods return just a <i>copy</i> of the actual boundary value. If you modify the result, the set will not be modified.</p>

</li>
<li><p>start_is_closed</p>

</li>
<li><p>end_is_closed</p>

<p>Returns true if the first or last dates belong to the span ( start &lt;= x &lt;= end ).</p>

</li>
<li><p>start_is_open</p>

</li>
<li><p>end_is_open</p>

<p>Returns true if the first or last dates are excluded from the span ( start &lt; x &lt; end ).</p>

</li>
<li><p>union</p>

</li>
<li><p>intersection</p>

</li>
<li><p>complement</p>

<p>Set operations may be performed not only with <code>DateTime::Span</code> objects, but also with <code>DateTime::Set</code> and <code>DateTime::SpanSet</code> objects. These set operations always return a <code>DateTime::SpanSet</code> object.</p>

<pre><code>    <span class="variable">$set</span> <span class="operator">=</span> <span class="variable">$span</span><span class="operator">-&gt;</span><span class="variable">union</span><span class="operator">(</span> <span class="variable">$set2</span> <span class="operator">);</span>         <span class="comment"># like "OR", "insert", "both"</span>
    <span class="variable">$set</span> <span class="operator">=</span> <span class="variable">$span</span><span class="operator">-&gt;</span><span class="variable">complement</span><span class="operator">(</span> <span class="variable">$set2</span> <span class="operator">);</span>    <span class="comment"># like "delete", "remove"</span>
    <span class="variable">$set</span> <span class="operator">=</span> <span class="variable">$span</span><span class="operator">-&gt;</span><span class="variable">intersection</span><span class="operator">(</span> <span class="variable">$set2</span> <span class="operator">);</span>  <span class="comment"># like "AND", "while"</span>
    <span class="variable">$set</span> <span class="operator">=</span> <span class="variable">$span</span><span class="operator">-&gt;</span><span class="variable">complement</span><span class="operator">;</span>             <span class="comment"># like "NOT", "negate", "invert"</span>
</code></pre>

</li>
<li><p>intersects</p>

</li>
<li><p>contains</p>

<p>These set functions return a boolean value.</p>

<pre><code>    <span class="keyword">if</span> <span class="operator">(</span> <span class="variable">$span</span><span class="operator">-&gt;</span><span class="variable">intersects</span><span class="operator">(</span> <span class="variable">$set2</span> <span class="operator">)</span> <span class="operator">)</span> <span class="operator">{</span> <span class="operator">...</span>  <span class="comment"># like "touches", "interferes"</span>
    <span class="keyword">if</span> <span class="operator">(</span> <span class="variable">$span</span><span class="operator">-&gt;</span><span class="variable">contains</span><span class="operator">(</span> <span class="variable">$dt</span> <span class="operator">)</span> <span class="operator">)</span> <span class="operator">{</span> <span class="operator">...</span>    <span class="comment"># like "is-fully-inside"</span>
</code></pre>

<p>These methods can accept a <code>DateTime</code>, <code>DateTime::Set</code>, <code>DateTime::Span</code>, or <code>DateTime::SpanSet</code> object as an argument.</p>

</li>
</ul>

<h1 id="SUPPORT">SUPPORT</h1>

<p>Support is offered through the <code>datetime@perl.org</code> mailing list.</p>

<p>Please report bugs using rt.cpan.org</p>

<h1 id="AUTHOR">AUTHOR</h1>

<p>Flavio Soibelmann Glock &lt;fglock@gmail.com&gt;</p>

<p>The API was developed together with Dave Rolsky and the DateTime Community.</p>

<h1 id="COPYRIGHT">COPYRIGHT</h1>

<p>Copyright (c) 2003-2006 Flavio Soibelmann Glock. All rights reserved. This program is free software; you can distribute it and/or modify it under the same terms as Perl itself.</p>

<p>The full text of the license can be found in the LICENSE file included with this module.</p>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<p>Set::Infinite</p>

<p>For details on the Perl DateTime Suite project please see <a href="http://datetime.perl.org">http://datetime.perl.org</a>.</p>


</body>

</html>


