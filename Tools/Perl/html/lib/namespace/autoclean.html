<?xml version="1.0" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<!-- saved from url=(0017)http://localhost/ -->
<script language="JavaScript" src="../../displayToc.js"></script>
<script language="JavaScript" src="../../tocParas.js"></script>
<script language="JavaScript" src="../../tocTab.js"></script>
<link rel="stylesheet" type="text/css" href="../../scineplex.css">
<title></title>
<link rel="stylesheet" href="../../Active.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#VERSION">VERSION</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#WHAT-IS-AND-ISNT-CLEANED">WHAT IS AND ISN&#39;T CLEANED</a></li>
  <li><a href="#PARAMETERS">PARAMETERS</a>
    <ul>
      <li><a href="#also-ITEM-REGEX-SUB">-also =&gt; [ ITEM | REGEX | SUB, .. ]</a></li>
      <li><a href="#also-ITEM">-also =&gt; ITEM</a></li>
      <li><a href="#also-REGEX">-also =&gt; REGEX</a></li>
      <li><a href="#also-SUB">-also =&gt; SUB</a></li>
      <li><a href="#except-ITEM-REGEX-SUB">-except =&gt; [ ITEM | REGEX | SUB, .. ]</a></li>
      <li><a href="#except-ITEM">-except =&gt; ITEM</a></li>
      <li><a href="#except-REGEX">-except =&gt; REGEX</a></li>
      <li><a href="#except-SUB">-except =&gt; SUB</a></li>
    </ul>
  </li>
  <li><a href="#CAVEATS">CAVEATS</a></li>
  <li><a href="#SEE-ALSO">SEE ALSO</a></li>
  <li><a href="#SUPPORT">SUPPORT</a></li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
  <li><a href="#CONTRIBUTORS">CONTRIBUTORS</a></li>
  <li><a href="#COPYRIGHT-AND-LICENCE">COPYRIGHT AND LICENCE</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>namespace::autoclean - Keep imports out of your namespace</p>

<h1 id="VERSION">VERSION</h1>

<p>version 0.28</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code>    <span class="keyword">package</span> <span class="variable">Foo</span><span class="operator">;</span>
    <span class="keyword">use</span> <span class="variable">namespace::autoclean</span><span class="operator">;</span>
    <span class="keyword">use</span> <span class="variable">Some::Package</span> <span class="string">qw/imported_function/</span><span class="operator">;</span>
    
    <span class="keyword">sub</span><span class="variable"> bar </span><span class="operator">{</span> <span class="variable">imported_function</span><span class="operator">(</span><span class="string">'stuff'</span><span class="operator">)</span> <span class="operator">}</span>
    
    <span class="comment"># later on:</span>
    <span class="variable">Foo</span><span class="operator">-&gt;</span><span class="variable">bar</span><span class="operator">;</span>               <span class="comment"># works</span>
    <span class="variable">Foo</span><span class="operator">-&gt;</span><span class="variable">imported_function</span><span class="operator">;</span> <span class="comment"># will fail. imported_function got cleaned after compilation</span>
</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>When you import a function into a Perl package, it will naturally also be available as a method.</p>

<p>The <code>namespace::autoclean</code> pragma will remove all imported symbols at the end of the current package&#39;s compile cycle. Functions called in the package itself will still be bound by their name, but they won&#39;t show up as methods on your class or instances.</p>

<p>This module is very similar to <a href="../../lib/namespace/clean.html">namespace::clean</a>, except it will clean all imported functions, no matter if you imported them before or after you <code>use</code>d the pragma. It will also not touch anything that looks like a method.</p>

<p>If you&#39;re writing an exporter and you want to clean up after yourself (and your peers), you can use the <code>-cleanee</code> switch to specify what package to clean:</p>

<pre><code>  <span class="keyword">package</span> <span class="variable">My::MooseX::namespace::autoclean</span><span class="operator">;</span>
  <span class="keyword">use</span> <span class="variable">strict</span><span class="operator">;</span>
  
  <span class="keyword">use</span> <span class="variable">namespace::autoclean</span> <span class="operator">();</span> <span class="comment"># no cleanup, just load</span>
  
  <span class="keyword">sub</span><span class="variable"> import </span><span class="operator">{</span>
      <span class="variable">namespace::autoclean</span><span class="operator">-&gt;</span><span class="variable">import</span><span class="operator">(</span>
        <span class="string">-cleanee</span> <span class="operator">=&gt;</span> <span class="keyword">scalar</span><span class="operator">(</span><span class="keyword">caller</span><span class="operator">),</span>
      <span class="operator">);</span>
  <span class="operator">}</span>
</code></pre>

<h1 id="WHAT-IS-AND-ISNT-CLEANED">WHAT IS AND ISN&#39;T CLEANED</h1>

<p><code>namespace::autoclean</code> will leave behind anything that it deems a method. For <a href="../../lib/Moose.html">Moose</a> classes, this the based on the <code>get_method_list</code> method on from the <a href="../../lib/metaclass.html">Class::MOP::Class</a>. For non-Moose classes, anything defined within the package will be identified as a method. This should match Moose&#39;s definition of a method. Additionally, the magic subs installed by <a href="../../lib/overload.html">overload</a> will not be cleaned.</p>

<h1 id="PARAMETERS">PARAMETERS</h1>

<h2 id="also-ITEM-REGEX-SUB">-also =&gt; [ ITEM | REGEX | SUB, .. ]</h2>

<h2 id="also-ITEM">-also =&gt; ITEM</h2>

<h2 id="also-REGEX">-also =&gt; REGEX</h2>

<h2 id="also-SUB">-also =&gt; SUB</h2>

<p>Sometimes you don&#39;t want to clean imports only, but also helper functions you&#39;re using in your methods. The <code>-also</code> switch can be used to declare a list of functions that should be removed additional to any imports:</p>

<pre><code>    <span class="keyword">use</span> <span class="variable">namespace::autoclean</span> <span class="operator">-</span><span class="string">also</span> <span class="operator">=&gt;</span> <span class="operator">[</span><span class="string">'some_function'</span><span class="operator">,</span> <span class="string">'another_function'</span><span class="operator">]</span><span class="operator">;</span>
</code></pre>

<p>If only one function needs to be additionally cleaned the <code>-also</code> switch also accepts a plain string:</p>

<pre><code>    <span class="keyword">use</span> <span class="variable">namespace::autoclean</span> <span class="operator">-</span><span class="string">also</span> <span class="operator">=&gt;</span> <span class="string">'some_function'</span><span class="operator">;</span>
</code></pre>

<p>In some situations, you may wish for a more <i>powerful</i> cleaning solution.</p>

<p>The <code>-also</code> switch can take a Regex or a CodeRef to match against local function names to clean.</p>

<pre><code>    <span class="keyword">use</span> <span class="variable">namespace::autoclean</span> <span class="operator">-</span><span class="string">also</span> <span class="operator">=&gt;</span> <span class="string">qr/^_/</span>
    
    <span class="keyword">use</span> <span class="variable">namespace::autoclean</span> <span class="operator">-</span><span class="string">also</span> <span class="operator">=&gt;</span> <span class="keyword">sub</span><span class="variable"> </span><span class="operator">{</span> <span class="variable">$_</span> <span class="operator">=~</span> <span class="regex">m{^_}</span> <span class="operator">};</span>
    
    <span class="keyword">use</span> <span class="variable">namespace::autoclean</span> <span class="operator">-</span><span class="string">also</span> <span class="operator">=&gt;</span> <span class="operator">[</span><span class="string">qr/^_/</span> <span class="operator">,</span> <span class="string">qr/^hidden_/</span> <span class="operator">]</span><span class="operator">;</span>
    
    <span class="keyword">use</span> <span class="variable">namespace::autoclean</span> <span class="operator">-</span><span class="string">also</span> <span class="operator">=&gt;</span> <span class="operator">[</span><span class="keyword">sub</span><span class="variable"> </span><span class="operator">{</span> <span class="variable">$_</span> <span class="operator">=~</span> <span class="regex">m/^_/</span> <span class="keyword">or</span> <span class="variable">$_</span> <span class="operator">=~</span> <span class="regex">m/^hidden/</span> <span class="operator">},</span> <span class="keyword">sub</span><span class="variable"> </span><span class="operator">{</span> <span class="keyword">uc</span><span class="operator">(</span><span class="variable">$_</span><span class="operator">)</span> <span class="operator">==</span> <span class="variable">$_</span> <span class="operator">}</span> <span class="operator">]</span><span class="operator">;</span>
</code></pre>

<h2 id="except-ITEM-REGEX-SUB">-except =&gt; [ ITEM | REGEX | SUB, .. ]</h2>

<h2 id="except-ITEM">-except =&gt; ITEM</h2>

<h2 id="except-REGEX">-except =&gt; REGEX</h2>

<h2 id="except-SUB">-except =&gt; SUB</h2>

<p>This takes exactly the same options as <code>-also</code> except that anything this matches will <i>not</i> be cleaned.</p>

<h1 id="CAVEATS">CAVEATS</h1>

<p>When used with <a>Moo</a> classes, the heuristic used to check for methods won&#39;t work correctly for methods from roles consumed at compile time.</p>

<pre><code>  <span class="keyword">package</span> <span class="variable">My::Class</span><span class="operator">;</span>
  <span class="keyword">use</span> <span class="variable">Moo</span><span class="operator">;</span>
  <span class="keyword">use</span> <span class="variable">namespace::autoclean</span><span class="operator">;</span>
  
  <span class="comment"># Bad, any consumed methods will be cleaned</span>
  <span class="keyword">BEGIN</span> <span class="operator">{</span> <span class="variable">with</span> <span class="string">'Some::Role'</span> <span class="operator">}</span>
  
  <span class="comment"># Good, methods from role will be maintained</span>
  <span class="variable">with</span> <span class="string">'Some::Role'</span><span class="operator">;</span>
</code></pre>

<p>Additionally, method detection may not work properly in <a>Mouse</a> classes in perls earlier than 5.10.</p>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<ul>

<li><p><a href="../../lib/namespace/clean.html">namespace::clean</a></p>

</li>
<li><p><a href="../../lib/B/Hooks/EndOfScope.html">B::Hooks::EndOfScope</a></p>

</li>
<li><p><a>namespace::sweep</a></p>

</li>
<li><p><a>Sub::Exporter::ForMethods</a></p>

</li>
<li><p><a href="../../lib/Sub/Name.html">Sub::Name</a></p>

</li>
<li><p><a href="../../lib/Sub/Install.html">Sub::Install</a></p>

</li>
<li><p><a>Test::CleanNamespaces</a></p>

</li>
<li><p><a>Dist::Zilla::Plugin::Test::CleanNamespaces</a></p>

</li>
</ul>

<h1 id="SUPPORT">SUPPORT</h1>

<p>Bugs may be submitted through <a href="https://rt.cpan.org/Public/Dist/Display.html?Name=namespace-autoclean">the RT bug tracker</a> (or <a href="mailto:bug-namespace-autoclean@rt.cpan.org">bug-namespace-autoclean@rt.cpan.org</a>).</p>

<p>There is also a mailing list available for users of this distribution, at <a href="http://lists.perl.org/list/moose.html">http://lists.perl.org/list/moose.html</a>.</p>

<p>There is also an irc channel available for users of this distribution, at irc://irc.perl.org/#moose.</p>

<h1 id="AUTHOR">AUTHOR</h1>

<p>Florian Ragwitz &lt;rafl@debian.org&gt;</p>

<h1 id="CONTRIBUTORS">CONTRIBUTORS</h1>

<ul>

<li><p>Karen Etheridge &lt;ether@cpan.org&gt;</p>

</li>
<li><p>Graham Knop &lt;haarg@haarg.org&gt;</p>

</li>
<li><p>Dave Rolsky &lt;autarch@urth.org&gt;</p>

</li>
<li><p>Kent Fredric &lt;kentfredric@gmail.com&gt;</p>

</li>
<li><p>Tomas Doran &lt;bobtfish@bobtfish.net&gt;</p>

</li>
<li><p>Shawn M Moore &lt;sartak@gmail.com&gt;</p>

</li>
<li><p>Felix Ostmann &lt;sadrak@sadrak-laptop.(none)&gt;</p>

</li>
<li><p>Chris Prather &lt;cprather@hdpublishing.com&gt;</p>

</li>
<li><p>Andrew Rodland &lt;andrew@hbslabs.com&gt;</p>

</li>
</ul>

<h1 id="COPYRIGHT-AND-LICENCE">COPYRIGHT AND LICENCE</h1>

<p>This software is copyright (c) 2009 by Florian Ragwitz.</p>

<p>This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</p>


</body>

</html>


